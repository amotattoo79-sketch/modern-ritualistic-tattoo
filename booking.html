<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Termin – Modern Ritualistic Tattoo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>Modern Ritualistic Tattoo</h1>
  <nav>
    <a href="index.html">Home</a> |
    <a href="philosophie.html">Philosophie</a> |
    <a href="angebote.html">Angebote &amp; Preise</a> |
    <a href="gallery.html">Galerie</a> |
    <a href="contact.html">Kontakt</a> |
    <a href="booking.html" aria-current="page">Termin</a> |
    <a href="impressum.html">Impressum</a> |
    <a href="datenschutz.html">Datenschutz</a>
  </nav>
</header>

<main class="content narrow">
  <h2>Termin buchen</h2>
  <p>Der Kalender wird erst nach deiner Zustimmung geladen (DSGVO-konform).</p>

  <!-- Consent-Box -->
  <section id="consent-box" class="card" style="margin-top:1rem">
    <p>
      Mit Klick auf „Kalender laden“ werden Inhalte von Calendly (externer Anbieter)
      geladen. Dabei können personenbezogene Daten (z. B. IP-Adresse) übertragen werden.
      Details in der <a href="datenschutz.html">Datenschutzerklärung</a>.
    </p>
    <button id="loadCalendly" type="button" class="btn">Kalender laden</button>
  </section>

  <!-- Container für das Inline-Widget -->
  <div id="calendly-container" style="display:none;min-height:820px">
    <!-- Calendly wird hier eingefügt -->
  </div>
</main>

<footer>
  <p>© <span id="year"></span> Modern Ritualistic Tattoo</p>
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  const btn = document.getElementById('loadCalendly');
  const box = document.getElementById('consent-box');
  const container = document.getElementById('calendly-container');

  const CAL_URL = "https://calendly.com/amotattoo79/30min?hide_gdpr_banner=1";

  btn.addEventListener('click', () => {
    // Consent-Box ausblenden
    box.style.display = 'none';
    // Container anzeigen
    container.style.display = 'block';

    // Widget-Container anlegen
    const inline = document.createElement('div');
    inline.id = "calendly-inline-widget";
    inline.className = "calendly-inline-widget";
    inline.setAttribute('data-url', CAL_URL);
    inline.style.minWidth = "320px";
    inline.style.height = "800px";
    container.appendChild(inline);

    // Calendly-Script laden und NACH dem Laden initialisieren
    const s = document.createElement('script');
    s.src = "https://assets.calendly.com/assets/external/widget.js";
    s.async = true;
    s.onload = () => {
      if (window.Calendly && window.Calendly.initInlineWidget) {
        window.Calendly.initInlineWidget({
          url: CAL_URL,
          parentElement: inline
        });
      }
    };
    document.body.appendChild(s);
  });
</script>
</body>
</html>
